<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.35.1">
<meta name="crystal_docs.project_version" content="HEAD-dev">
<meta name="crystal_docs.project_name" content="markov">



<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="markov">
  <title>markov HEAD-dev</title>
  <script type="text/javascript">
  CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          markov
        </a>
      </h1>

      <span class="project-version">
        HEAD-dev
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="markov/Markov" data-name="markov">
      <a href="Markov.html">Markov</a>
      
        <ul>
  
  <li class=" " data-id="markov/Markov/Chain" data-name="markov::chain(linktype)">
      <a href="Markov/Chain.html">Chain</a>
      
    </li>
  
  <li class="parent " data-id="markov/Markov/Exceptions" data-name="markov::exceptions">
      <a href="Markov/Exceptions.html">Exceptions</a>
      
        <ul>
  
  <li class=" " data-id="markov/Markov/Exceptions/EmptyTransitionMatrixException" data-name="markov::exceptions::emptytransitionmatrixexception">
      <a href="Markov/Exceptions/EmptyTransitionMatrixException.html">EmptyTransitionMatrixException</a>
      
    </li>
  
  <li class=" " data-id="markov/Markov/Exceptions/EmptyTransitionTableException" data-name="markov::exceptions::emptytransitiontableexception">
      <a href="Markov/Exceptions/EmptyTransitionTableException.html">EmptyTransitionTableException</a>
      
    </li>
  
  <li class=" " data-id="markov/Markov/Exceptions/InvalidSeedException" data-name="markov::exceptions::invalidseedexception">
      <a href="Markov/Exceptions/InvalidSeedException.html">InvalidSeedException</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="markov/Markov/TransitionMatrix" data-name="markov::transitionmatrix(linktype)">
      <a href="Markov/TransitionMatrix.html">TransitionMatrix</a>
      
    </li>
  
  <li class=" " data-id="markov/Markov/TransitionTable" data-name="markov::transitiontable(linktype)">
      <a href="Markov/TransitionTable.html">TransitionTable</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1><a id="markov" class="anchor" href="#markov">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>â›“ Markov</h1>

<p>A Crystal library for building Markov Chains and running Markov Processes.</p>

<p><a href="https://travis-ci.org/mccallofthewild/markov"><img src="https://travis-ci.org/mccallofthewild/markov.svg?branch=master" alt="Build Status"/></a> <a href="https://mccallofthewild.github.io/markov/"><img src="https://img.shields.io/badge/docs-available-brightgreen.svg" alt="Docs"/></a> <a href="https://github.com/mccallofthewild/markov/releases"><img src="https://img.shields.io/github/release/mccallofthewild/markov.svg" alt="GitHub release"/></a></p>

<h3><a id="-what-is-a-markov-chain-" class="anchor" href="#-what-is-a-markov-chain-">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a><em>What is a Markov Chain?</em></h3>

<p>A Markov Chain is essentially a mechanism for guessing probable future events based on a sample of past events.
For a great explanation, watch <a href="https://www.khanacademy.org/computing/computer-science/informationtheory/moderninfotheory/v/markov_chains">this Khan Academy video</a>.</p>

<h3><a id="visit-the-api-documentationhttpsmccallofthewild.github.iomarkov-for-a-more-in-depth-look-at-the-librarys-functionality." class="anchor" href="#visit-the-api-documentationhttpsmccallofthewild.github.iomarkov-for-a-more-in-depth-look-at-the-librarys-functionality.">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Visit the <a href="https://mccallofthewild.github.io/markov/">API Documentation</a> for a more in-depth look at the library's functionality.</h3>

<h2><a id="installation" class="anchor" href="#installation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Installation</h2>

<p>Add this to your application's <code>shard.yml</code>:</p>

<pre><code class="language-yaml">dependencies:
  markov:
    github: mccallofthewild/markov</code></pre>

<p>In your terminal, install Crystal dependencies with:</p>

<pre><code class="language-bash">$ shards install</code></pre>

<p>or </p>

<pre><code class="language-bash">$ crystal deps</code></pre>

<h2><a id="usage" class="anchor" href="#usage">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Usage</h2>

<p>Begin by requiring the <code><a href="Markov.html">Markov</a></code> module:</p>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;markov&quot;</span></code></pre>

<h3><a id="basic-hello-markov" class="anchor" href="#basic-hello-markov">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Basic -- Hello Markov</h3>

<p>A classic Markov text generator. This example will work well for small (array-sized) data sets.</p>

<p><span class="flag purple">NOTE</span>  <code><a href="Markov/Chain.html">Markov::Chain</a></code> is a generic type which contains, receives and generates elements of <code>LinkType</code>.</p>

<p>We'll start with the sample text:</p>

<pre><code class="language-crystal">example_string <span class="o">=</span> <span class="s">&quot;how much wood would a woodchuck chuck if a woodchuck could chuck wood&quot;</span></code></pre>

<p>There are several <code><a href="Markov/Chain.html">Markov::Chain</a></code> constructors to choose from. The simplest one takes in a <code>LinkType</code> array of elements as <code>sample</code> and a <code>seed</code> of <code>LinkType</code>. <code>seed</code> is the element in <code>sample</code> you want to start the chain with. If not provided, a random element will be chosen.</p>

<pre><code class="language-crystal">example_arr <span class="o">=</span> example_string.split(<span class="s">&quot; &quot;</span>) <span class="c">#=&gt; [&quot;how&quot;,&quot;much&quot;,&quot;wood&quot;,&quot;would&quot;,&quot;a&quot;,&quot;woodchuck&quot;,&quot;chuck&quot;,&quot;if&quot;,&quot;a&quot;,&quot;woodchuck&quot;,&quot;could&quot;,&quot;chuck&quot;,&quot;wood&quot;]</span>
seed <span class="o">=</span> example_arr[<span class="n">0</span>] <span class="c">#=&gt; &quot;how&quot;</span>

example_chain <span class="o">=</span> <span class="t">Markov</span><span class="t">::</span><span class="t">Chain</span>(<span class="t">String</span>).<span class="k">new</span> sample: example_arr, seed: seed</code></pre>

<p>Finally, we'll generate a probable sequence of elements with the <code>Markov::Chain#generate</code> method:</p>

<pre><code class="language-crystal">puts example_chain.generate(<span class="n">10</span>)</code></pre>

<p>Output:</p>

<pre><code class="language-bash">["much", "wood", "would", "a", "woodchuck", "could", "chuck", "if", "a", "woodchuck"]</code></pre>

<p>That's it! </p>

<p>If we wanted to get the elements one at a time, we could use the <code>Markov::Chain#next</code> method instead:</p>

<pre><code class="language-crystal">puts example_chain.<span class="k">next</span> <span class="c">#=&gt; &quot;much&quot;</span>
puts example_chain.<span class="k">next</span> <span class="c">#=&gt; &quot;wood&quot;</span>
puts example_chain.<span class="k">next</span> <span class="c">#=&gt; &quot;would&quot;</span></code></pre>

<h3><a id="advanced" class="anchor" href="#advanced">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Advanced </h3>

<p>This implementation was built for larger data sets, with asynchronous input in mind.</p>

<p>In this example, we will create a <code><a href="Markov/Chain.html">Markov::Chain</a></code> which can generate realistic movie titles.</p>

<p>To begin, we instantiate a <code><a href="Markov/TransitionTable.html">Markov::TransitionTable</a></code>. A <code>TransitionTable</code> is a mechanism for training and implementing Markov processes.</p>

<pre><code class="language-crystal">example_table <span class="o">=</span> <span class="t">Markov</span><span class="t">::</span><span class="t">TransitionTable</span>(<span class="t">String</span>).<span class="k">new</span></code></pre>

<h4><a id="markovtransition-tableadd" class="anchor" href="#markovtransition-tableadd">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a><code>Markov::TransitionTable#add</code></h4>

<p>Now we'll add a movie title using the <code>Markov::TransitionTable#add</code> method:</p>

<pre><code class="language-crystal">movie_one <span class="o">=</span> <span class="s">%w(the great gatsby)</span> <span class="c"># shortcut syntax for [&quot;the&quot;,&quot;great&quot;,&quot;gatsby&quot;]</span>

movie_one.each <span class="k">do</span> <span class="o">|</span>word<span class="o">|</span>
  example_table.add(word)
<span class="k">end</span></code></pre>

<p><code>Markov::TransitionTable#add</code> adds elements one at a time. At a deeper level, it's adding each new word to the previous word's <a href="https://en.wikipedia.org/wiki/Stochastic_matrix">Transition Matrix</a> (<code><a href="Markov/TransitionMatrix.html">Markov::TransitionMatrix</a></code>).</p>

<h4><a id="markovtransition-tablefill" class="anchor" href="#markovtransition-tablefill">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a><code>Markov::TransitionTable#fill</code></h4>

<p>For syntactic sugar, if we have an array of elements, we can avoid looping through and <code>#add</code>-ing them by using the <code>Markov::TransitionTable#fill</code> method instead:</p>

<pre><code class="language-crystal">movie_one <span class="o">=</span> <span class="s">%w(the great gatsby)</span> <span class="c"># shortcut syntax for [&quot;the&quot;,&quot;great&quot;,&quot;gatsby&quot;]</span>

example_table.fill table_with: movie_one</code></pre>

<h4><a id="markovtransition-tablereset" class="anchor" href="#markovtransition-tablereset">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a><code>Markov::TransitionTable#reset</code></h4>

<p>A problem arises at this point:</p>

<pre><code class="language-crystal">movie_two <span class="o">=</span> <span class="s">%w(great expectations)</span>
example_table.fill table_with: movie_two</code></pre>

<p>The above code sequentially adds each word to the <code>TransitionTable</code>. But <em>The Great Gatsby</em> and <em>Great Expectations</em> are two separate movie titles; the "Great" at the beginning of <em>Great Expectations</em> is not a probable transition from the "Gatsby" at the end of <em>The Great Gatsby</em>.</p>

<p>To solve this, use <code>Markov::TransitionTable#reset</code>. <code>#reset</code> clears the <code>TransitionTable</code>'s last added key, allowing us to separate titles like so:</p>

<pre><code class="language-crystal">movie_one <span class="o">=</span> <span class="s">%w(the great gatsby)</span>
example_table.fill table_with: movie_one

example_table.reset
movie_two <span class="o">=</span> <span class="s">%w(great expectations)</span>
example_table.fill table_with: movie_two

example_table.reset
movie_three <span class="o">=</span> <span class="s">%w(the great escape)</span>
example_table.fill table_with: movie_three</code></pre>

<h4><a id="implementing-the-transition-table-with-a-markovchain" class="anchor" href="#implementing-the-transition-table-with-a-markovchain">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Implementing the <code>TransitionTable</code> with a <code><a href="Markov/Chain.html">Markov::Chain</a></code></h4>

<p>Finally, we can put the <code>TransitionTable</code> to use by passing it to a <code><a href="Markov/Chain.html">Markov::Chain</a></code> constructor as <code>transition_table</code>:</p>

<pre><code class="language-crystal">example_chain <span class="o">=</span> <span class="t">Markov</span><span class="t">::</span><span class="t">Chain</span>(<span class="t">String</span>).<span class="k">new</span> transition_table: example_table, seed: <span class="s">&quot;great&quot;</span></code></pre>

<h4><a id="handling-dead-ends" class="anchor" href="#handling-dead-ends">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Handling Dead Ends</h4>

<p>With small and/or unique data sets, Markov chains are fallible to reaching dead ends. That is, they can often reach a point where there is nothing to transition to.</p>

<p>When this happens in the <code><a href="Markov.html">Markov</a></code> module, <code><a href="Markov/Exceptions/EmptyTransitionMatrixException.html">Markov::Exceptions::EmptyTransitionMatrixException</a></code> is raised.</p>

<p>For example:</p>

<pre><code class="language-crystal">dead_end_array <span class="o">=</span> <span class="s">%w(some say the world will end in fire)</span>
dead_end_chain <span class="o">=</span> <span class="t">Markov</span><span class="t">::</span><span class="t">Chain</span>(<span class="t">String</span>).<span class="k">new</span> sample: dead_end_array, seed: <span class="s">&quot;fire&quot;</span>
<span class="c"># nothing comes after &quot;fire&quot;, so the chain is at a dead end.</span>
dead_end_chain.<span class="k">next</span> <span class="c"># raises `EmptyTransitionMatrixException`</span></code></pre>

<p>To prevent this, use the <code>Markov::Chain#on_dead_end</code> exception handler. </p>

<p>This method takes in a callback block with arguments of: the <code><a href="Markov/Chain.html">Markov::Chain</a></code>'s <code>@transition_table</code>, the <code><a href="Markov/Chain.html">Markov::Chain</a></code> instance, and the <code>EmptyTransitionMatrixException</code> raised.</p>

<p>The block's return value of <code>LinkType</code> fills in as the next item in the chain.</p>

<pre><code class="language-crystal">dead_end_array <span class="o">=</span> <span class="s">%w(some say the world will end in fire)</span>
dead_end_chain <span class="o">=</span> <span class="t">Markov</span><span class="t">::</span><span class="t">Chain</span>(<span class="t">String</span>).<span class="k">new</span> sample: dead_end_array, seed: <span class="s">&quot;fire&quot;</span>

dead_end_chain.on_dead_end <span class="k">do</span> <span class="o">|</span>transition_table, chain, exception<span class="o">|</span>
  <span class="s">&quot;some&quot;</span>
<span class="k">end</span>

dead_end_chain.<span class="k">next</span> <span class="c">#=&gt; &quot;some&quot;</span>
dead_end_chain.<span class="k">next</span> <span class="c">#=&gt; &quot;say&quot;</span>
dead_end_chain.<span class="k">next</span> <span class="c">#=&gt; &quot;the&quot;</span></code></pre>

<h2><a id="contributing" class="anchor" href="#contributing">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributing</h2>

<ol><li>Fork it ( https://github.com/mccallofthewild/markov/fork )</li><li>Create your feature branch (git checkout -b my-new-feature)</li><li>Commit your changes (git commit -am 'Add some feature')</li><li>Push to the branch (git push origin my-new-feature)</li><li>Create a new Pull Request</li></ol>

<h2><a id="contributors" class="anchor" href="#contributors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributors</h2>

<ul><li><a href="https://github.com/mccallofthewild">McCall Alexander</a> mccallofthewild - creator, maintainer</li></ul>
</div>
</body>
</html>
